è¿™ä¸ª6bå°±æ˜¯æ¸…åå¼€æºçš„è¿™ä¸ª[GLM-6B](https://github.com/THUDM/ChatGLM-6B), å§æ§½ï¼Œæ¸…åå¼€æºçš„ï¼Œè¿˜6B æ˜¯æœç€ç‰›é€¼çš„æ–¹å‘å‘å±•å‘½åçš„å˜›ï¼Ÿ å¦‚æœæˆ‘å­¦äº†è¿™ä¸ªï¼Œç»™å®ƒæä¸ªPRä»€ä¹ˆçš„ï¼Œé‚£æ¸…å (å†™ ChatCLM-6B)   =    æˆ‘   (å†™ ChatCLM-6B)<br />åˆä¸­å­¦è¿‡ æ¶ˆé™¤å…¬å› å¼ï¼Œä¹Ÿå°±æ˜¯ æˆ‘ === æ¸…å<br />![](https://cdn.nlark.com/yuque/0/2023/gif/1638822/1681635598142-5a4b4a64-0269-4e58-ba31-03668150d11b.gif#averageHue=%23b5b5b5&clientId=uc7484e32-b90b-4&from=paste&height=171&id=u03ed59e7&originHeight=267&originWidth=240&originalType=url&ratio=1.25&rotation=0&showTitle=false&status=done&style=stroke&taskId=u1e0cc844-7a1a-436e-a2dc-56560258d53&title=&width=154)
<a name="6ab93070"></a>
# GML6Bæ¨¡å‹ä»‹ç»ï¼šé€‰æ‹©â€œä¿®ä»™â€æœ€å¼±æ¨¡å‹
> åŸæ–‡ï¼šä¸ºä»€ä¹ˆè£…è¿™ä¸ªï¼Œå› ä¸ºç›®å‰ä¹Ÿåªæœ‰è¿™ä¸ªæ¨¡å‹å¯ä»¥ç»™ä¸ªäººç»ƒç»ƒæ‰‹ï¼Œè™½ç„¶ä»–å¬èµ·æ¥å¾ˆç‰›B,ä½†æ˜¯ä»–æ˜¯æœ€å°çš„ä¸€ä¸ªæ¨¡å‹ï¼Œæˆ˜æ–—åŠ›æœ€è‹¥çš„ã€‚å…¶ä»–çš„å¤§æ¨¡å‹æ ¹æœ¬è¿˜åˆ°ä¸äº†æ™®é€šä¿®ä»™è€…æ‰‹é‡Œï¼Œå’‹å°±è¯´è‡ªå·±çš„çµæ ¹ä¸å’‹åœ°ï¼Œç©ä¸äº†å¤šä¹ˆå‰å®³ï¼Œç´¢æ€§æ‹¿æœ€å·®çš„ç»ƒç»ƒæ‰‹ï¼Œå°±å½“ä¸€ä¸ªä¿®ç‚¼å¯¹è¯æ¨¡å‹é¢†åŸŸçš„æœºä¼šï¼Œç°åœ¨AIè¿™ä¹ˆç«ï¼Œä½ åˆè¿˜æ˜¯å•èº«ï¼Œå®Œå…¨å¯ä»¥è‡ªå·±åšä¸€ä¸ªæ ‡å‡†æ¸©æŸ”å¯çˆ±å¥³å‹å¼æ•°æ®é›†ï¼Œè®­ç»ƒä¹‹åè®©å¥¹è·Ÿä½ å¯¹è¯ï¼Œè¿™åˆä¸èŠ±é’±ï¼Œç­‰ä½ æ‰¾åˆ°çœŸå¥³å‹ä¹‹åï¼Œå²‚ä¸æ˜¯ã€‚ã€‚ã€‚
> GPTç”Ÿæˆä»¥ä¸‹å¯¹è¯ï¼š

å˜¿ï¼Œç¨‹åºçŒ¿ï¼ä½ åœ¨å¯»æ‰¾ä¸€ä¸ªç»ƒæ‰‹çš„GPT-3æ¨¡å‹å—ï¼Ÿé‚£å°±åˆ«é”™è¿‡GML6Bè¿™æ¬¾â€œä¿®ä»™ç•Œâ€çš„æœ€å¼±æ¨¡å‹äº†ï¼è™½ç„¶å®ƒåœ¨GPT-3å®¶æ—ä¸­çš„æˆ˜æ–—åŠ›å¯èƒ½æŸ”å¼±ï¼Œä½†å¯¹äºæˆ‘ä»¬è¿™äº›æ™®é€šçš„ä¿®ä»™è€…æ¥è¯´ï¼Œå´æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼
<a name="ZWCUU"></a>
## ä¸ºä½•é€‰æ‹©GML6Bæ¨¡å‹
é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦é€‰æ‹©è¿™æ¬¾æœ€å°çš„GML6Bæ¨¡å‹å‘¢ï¼ŸåŸå› å¾ˆç®€å•ï¼š

-  ç¨‹åºå‘˜æœ€ä½³ç»ƒæ‰‹ï¼šå¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼ŒGML6Bæ¨¡å‹æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„ç»ƒæ‰‹æœºä¼šï¼è™½ç„¶å®ƒå°å·§ç²¾æ‚ï¼Œä½†å´èƒ½è®©ä½ ç†Ÿæ‚‰GPT-3æ¨¡å‹çš„ä½¿ç”¨ï¼Œä¸ºæœªæ¥é©¾é©­æ›´å¼ºå¤§çš„æ¨¡å‹åšå¥½å……è¶³çš„å‡†å¤‡ã€‚ 
-  ç¨‹åºå‘˜ä¿®ä»™å¿…å¤‡ï¼šå°±åƒä¿®ä»™ä¸–ç•Œä¸­çš„ä¿®ç‚¼å°é“ï¼Œä»æœ€å¼±çš„å¼€å§‹ä¸€æ­¥æ­¥ä¿®ç‚¼åˆ°æœ€å¼ºï¼é€šè¿‡ä½¿ç”¨GML6Bæ¨¡å‹ï¼Œä½ å¯ä»¥æŒæ¡å¯¹è¯æ¨¡å‹çš„æŠ€èƒ½ï¼Œè¸ä¸Šä¿®ä»™ä¹‹è·¯ï¼Œæ‰èƒ½åœ¨ç¨‹åºå‘˜çš„ä¸–ç•Œä¸­ç‚‰ç«çº¯é’ï¼ 
-  çµæ´»è½»ä¾¿ï¼šGML6Bæ¨¡å‹èµ„æºæ¶ˆè€—ä½ï¼Œéƒ¨ç½²ç®€ä¾¿ï¼Œéå¸¸é€‚åˆä¸ªäººé¡¹ç›®å’Œå°è§„æ¨¡åº”ç”¨ã€‚åƒç¨‹åºå‘˜ä¸€æ ·ï¼Œçµæ´»æ€§æ»¡åˆ†ï¼éšæ—¶ä½¿ç”¨ï¼Œè½»æ¾åº”å¯¹å„ç§æƒ…å†µï¼ 
<a name="LMTyE"></a>
## æ€»ç»“
è™½ç„¶GML6Bæ¨¡å‹åœ¨æ€§èƒ½ä¸Šå¯èƒ½ä¸å¦‚é‚£äº›å‚²å¨‡çš„å¤§æ¨¡å‹ï¼Œä½†å¯¹äºç¨‹åºçŒ¿æ¥è¯´ï¼Œå®ƒå´æ˜¯ä¸€ä¸ªæœ‰è¶£åˆå®ç”¨çš„é€‰æ‹©ï¼å°±åƒä¿®ä»™ç•Œé‡Œçš„å°çµçŸ³ï¼Œè™½ç„¶çœ‹ä¼¼å¹³å‡¡ï¼Œä½†è•´å«ç€å·¨å¤§çš„æ½œåŠ›ã€‚é€šè¿‡ä½¿ç”¨GML6Bæ¨¡å‹ï¼Œä½ å¯ä»¥é”»ç‚¼è‡ªå·±çš„æŠ€èƒ½ï¼Œä¸ºæœªæ¥çš„ä¿®ä»™ä¹‹è·¯åšå¥½å‡†å¤‡ï¼Œæˆä¸ºç¨‹åºå‘˜ä¿®ä»™ç•Œçš„çœŸæ­£å¤§ç¥ï¼<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681634573542-4de40ee4-3010-4a71-a8c9-fde3f723cbee.png#averageHue=%23937964&clientId=uc7484e32-b90b-4&from=paste&height=180&id=wU5Tk&name=image.png&originHeight=300&originWidth=300&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=124340&status=done&style=stroke&taskId=u4aa68a44-626e-45bf-a4cb-74043c6f1db&title=&width=180)

ä¸Šé¢çš„ä»‹ç»å’Œæ€»ç»“æ˜¯GPTç”Ÿæˆï¼ŒåŸæ–‡åœ¨ä¸Šé¢ï¼Œå¤§å®¶è§‰å¾—ä¼˜åŒ–çš„å¦‚ä½•ï¼Ÿï¼ˆè¡¨æƒ…åŒ…æ˜¯è‡ªå·±çš„ï¼‰<br />å¥½äº†ï¼Œåé¢éƒ½æ˜¯è‡ªå·±ç å­—çš„äº†ã€‚

> ä»¥ä¸‹çš„å®‰è£…æ–¹æ³•éƒ½æ˜¯ä¸ªäººåœ¨è‡ªå·±è¾£é¸¡çš„ç¬”è®°æœ¬ä¸ŠçœŸå®å®‰è£…è¿‡ï¼Œå¹¶ä¸”æœ‰æ•ˆçš„ï¼Œè¸©äº†å¾ˆå¤šå‘ï¼Œå¸Œæœ›å¯¹å¤§å®¶çš„ä¿®ç‚¼æœ‰å¸®åŠ©ï¼Œå½“ç„¶ï¼Œä¹Ÿä¼šæ„å¤–å‘ç”Ÿï¼Œå¦‚æœå®‰è£…å¤±è´¥ï¼Œåˆ‡å‹¿æ‰æ€¥ä¸Šç«ï¼Œå‹å¥½çš„äº¤æµæ²Ÿé€šå¯ä»¥å¸®åŠ©ä½ è§£å†³é—®é¢˜ã€‚
> æ ‡é¢˜è¯´çš„æ˜¯çœŸçš„ï¼Œå¯¹äºä¸€ä¸ªæ²¡æœ‰è¿™æ–¹é¢ç§¯ç´¯çš„èœé¸¡æ¥è¯´çœŸçš„èŠ±äº†ä¸¤å¤©æ—¶é—´ï¼Œæ’ä½ä¸Šåˆ†éƒ½è½ä¸‹äº† ğŸ¤¬

<a name="BslJp"></a>
# å…‹éš†Clone
è¿›å»å…‹éš†è¿™ä¸ªä»“åº“åˆ°æœ¬åœ°[è¿™ä¸ª6B](https://github.com/THUDM/ChatGLM-6B)ï¼Œå®˜æ–¹æ–‡æ¡£å…¶å®ä¹Ÿæœ‰éƒ¨ç½²æ–‡æ¡£ï¼Œä½†æ˜¯å¯¹äºä¸ªäººç¬”è®°æœ¬æ¥è¯´ä¼šæœ‰ä¸€äº›å‘ç‚¹ï¼Œç¯å¢ƒè¿™ç©æ„ç‰¹åˆ«åƒç‰ˆæœ¬å¯¹åº”è¿™ä¸ªåœºæ™¯ï¼Œä¸€ä¸ªåœ°æ–¹å¡æ­»ä½ ï¼Œnnd ã€‚ <br />å¦‚æœä½ æœ‰colab,å¯ä»¥åœ¨ä¸Šé¢ç…§è¿™å®˜ç½‘éƒ¨ç½²ä¸€ä¸‹ï¼Œé‚£ç°å¸¸ä¸æ»‘ï¼Œä½†æ˜¯ä¸ºäº†è‡ªå·±è®­ç»ƒï¼Œåœ¨æœ¬åœ°éƒ¨ç½²ä¼šå¥½ä¸€äº›ã€‚

<a name="Sbz5i"></a>
# ç¬¬ä¸€æ‹›ï¼šæŸ¥çœ‹CUDAç‰ˆæœ¬
è¯´å®è¯ï¼Œå¯¹äºä¸€ä¸ªå°ç™½æ¥è¯´ï¼ŒæŠŠæ¡ä¸ä½é‡ç‚¹ï¼Œå°±åƒå‰ç«¯æ­å»ºä¸€ä¸ªç¯å¢ƒï¼Œä½ ä½œä¸ºæ–°äººè£…äº†ä¸€å †ä»€ä¹ˆwebpack ã€vite å„ç§æŠ€æœ¯æ ˆéƒ½æ˜¯æ–°çš„ï¼Œä½†æ˜¯æ”¾åœ¨è€é¡¹ç›®é‡Œä¸€è·‘æ¡†æ¡†æŠ¥é”™ï¼Œä½ çš„ç”µè„‘å°±æ˜¯é¡¹ç›®è¿è¡Œç¯å¢ƒï¼Œä½ å¾—çŸ¥é“ä½ ç›®å‰çš„é¡¹ç›®èƒ½æ”¯æŒè£…ä»€ä¹ˆæ ·çš„ç‰ˆæœ¬ï¼Œå®˜æ–¹æä¾›çš„ä¾èµ–é»˜è®¤ä¸‹è½½éƒ½æ˜¯æœ€æ–°çš„ï¼Œç‰¹åˆ«æ˜¯torch,è¯´åˆ°è¿™é‡Œå°±æ¥æ°”ï¼Œè¿™ç©æ„ä¹Ÿæµªè´¹ä¸å°‘æ—¶é—´ï¼Œ    è·‘é¢˜äº†ï¼Œé¦–å…ˆåœ¨cmdé‡Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤
```javascript
 nvidia-smi
```
![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681636544471-059614f8-d1cb-4633-bece-448533bded70.png#averageHue=%231b1b1b&clientId=uc7484e32-b90b-4&from=paste&height=640&id=u18491693&name=image.png&originHeight=800&originWidth=1499&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=115154&status=done&style=stroke&taskId=u528d42c6-e03c-4e0a-b43e-90db12882ff&title=&width=1199.2)<br />è¿™ä¸ªæ˜¯æŸ¥çœ‹è‡ªå·±æœ‰æ²¡æœ‰æ˜¾å¡é©±åŠ¨çš„å‘½ä»¤ï¼Œä¸€èˆ¬ç¬”è®°æœ¬ä¹°æ¥é»˜è®¤éƒ½æ˜¯è£…äº†çš„ï¼Œå¦‚æœä½ å¾ˆç‰¹åˆ«æ˜¯ä¸ªä¼ªçµæ ¹ï¼Œé‚£ä¹ˆå¾—è‡ªå·±è£…ä¸‹é©±åŠ¨ å¯ä»¥ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç¬¦åˆç”µè„‘çš„é©±åŠ¨ [é©±åŠ¨](https://www.nvidia.cn/geforce/drivers/)<br />ä¸Šé¢çš„é©±åŠ¨ç‰ˆæœ¬æ˜¯452.06 ï¼ŒCUDAç‰ˆæœ¬æ˜¯11.0 ï¼Œæ„å‘³ç€**æˆ‘è¿™ä¸ªé©±åŠ¨æœ€é«˜æ”¯æŒçš„CUDAç‰ˆæœ¬æ˜¯11.0**.å¯ä»¥æ ¹æ®Torchçš„ç‰ˆæœ¬ **é™çº§é€‰æ‹©å…¶ä»–çš„CUDAç‰ˆæœ¬**ï¼Œ**è¿™é‡Œæ¨èå®‰è£…10.2**ï¼Œä¸ºä»€ä¹ˆæ˜¯å®ƒï¼Œ**è·Ÿ6Bé‡Œå†™çš„ä»£ç æœ‰å…³ä¹Ÿè·ŸTorchæœ‰å…³**ï¼Œå®æµ‹10.2æ˜¯Torchæ”¯æŒæœ€å¤šçš„ä¸€ä¸ªå‹å·ï¼Œå®‰è£…torchçš„æ—¶å€™å†è¯¦ç»†è¯´æ˜ï¼Œ[CUDAä¸‹è½½åœ°å€](https://developer.nvidia.com/cuda-toolkit-archive)<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681637789155-c2f7b49e-2012-4e9b-ba37-e741de2dfd54.png#averageHue=%23fdfcfb&clientId=uc7484e32-b90b-4&from=paste&height=333&id=u7fb9e5cb&name=image.png&originHeight=843&originWidth=1679&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=235772&status=done&style=stroke&taskId=uf206c301-d031-42ec-8685-f26de6df2d5&title=&width=663.4000244140625)<br />å…¶ä»–CUDAç‰ˆæœ¬å¯ å®‰è£…å¯¹åº”çš„ç‰ˆæœ¬ ä½†æ˜¯ï¼Œæœ€å¥½å®‰è£… <br />**torch>=1.10.1æ”¯æŒçš„ CUDAç‰ˆæœ¬ï¼Œ **<br />**torch>=1.10.1æ”¯æŒçš„ CUDAç‰ˆæœ¬   **<br />**torch>=1.10.1æ”¯æŒçš„ CUDAç‰ˆæœ¬**<br />å¯ä»¥å»[å®˜ç½‘](https://pytorch.org/get-started/locally/)è¿™é‡ŒæŸ¥çœ‹ è‡ªå·±çš„CUDAç‰ˆæœ¬æ”¯ä¸æ”¯æŒ1.10.1ä»¥ä¸Šçš„torch<br />è¿˜éœ€è¦å®‰è£…ä¸€ä¸ª [CUDNN](https://developer.nvidia.com/rdp/cudnn-archive), å¯¹åº”CUDAçš„ç‰ˆæœ¬å³å¯ã€‚<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681638146801-061e6287-7271-4f5e-b826-e796c336bfef.png#averageHue=%23f5f3f3&clientId=uc7484e32-b90b-4&from=paste&height=296&id=u666e1305&name=image.png&originHeight=846&originWidth=1171&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=110490&status=done&style=stroke&taskId=u2e2a687d-77a2-4678-92e1-0a1da2f9911&title=&width=410.4000244140625)<br />ä¸‹è½½å®Œæˆè¿™ä¸¤ä¸ªä¹‹åå¼€å§‹å®‰è£…è¿™ä¸ªç©æ„
<a name="HD3na"></a>
## å®‰è£…CUDA
åŒå‡»ï¼Œè¿™ä¸ªä¸´æ—¶ç›®å½•ï¼Œä¸ç”¨ç®¡ Cç›˜å°±Cç›˜äº†ï¼Œå®ƒä¼šè‡ªå·±åˆ é™¤ï¼Œç¬¬ä¸€å¤©æˆ‘è£…åœ¨Dç›˜ï¼Œç„¶åä¸‹ä¸€æ­¥çš„æ­£å¼å®‰è£…ç›®å½•ä¹Ÿåœ¨Dç›˜ï¼Œç»“æœå®ƒå§æˆ‘è£…å¥½çš„ç»™åˆ äº†ï¼Œï¼Œï¼Œï¼Œ 
> ä»¥ä¸‹å›¾ç‰‡æ¥è‡ª [https://blog.csdn.net/L1778586311/article/details/112425993](https://blog.csdn.net/L1778586311/article/details/112425993)ï¼Œè¯¦ç»†å¯çœ‹å®ƒçš„å®‰è£…æ­¥éª¤

![](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681638311839-d735f760-77db-4fd2-8877-295c5a4cff22.png#averageHue=%23ece8e6&clientId=uc7484e32-b90b-4&from=paste&id=U93Uu&originHeight=188&originWidth=416&originalType=url&ratio=1.25&rotation=0&showTitle=false&status=done&style=stroke&taskId=uc84f745f-3c82-45b0-9ab0-bf56578c00a&title=)<br />![](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681638412967-693d4698-36e2-4fb2-823a-7ba1870bc901.png#averageHue=%2318211d&clientId=uc7484e32-b90b-4&from=paste&id=u7901cd4e&originHeight=451&originWidth=608&originalType=url&ratio=1.25&rotation=0&showTitle=false&status=done&style=stroke&taskId=ua21f1b4b-09e4-423a-84c8-d3840047219&title=)<br />![](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681638510386-d3cb0279-084a-4ee0-8555-63b0b10048a6.png#averageHue=%23263230&clientId=uc7484e32-b90b-4&from=paste&id=u23e1f4d0&originHeight=430&originWidth=519&originalType=url&ratio=1.25&rotation=0&showTitle=false&status=done&style=stroke&taskId=u15db180f-29f6-4088-ab60-ae927c733d9&title=)<br />è¿™é‡Œçš„è²Œä¼¼å¯ä»¥ä¸ç”¨å‹¾é€‰ï¼Œå¦‚æœå‹¾é€‰äº†é‚£ä¹ˆä½ çš„ç”µè„‘è¿˜éœ€è¦å®‰è£…Visual Studio ï¼Œæˆ‘ä¸ªäººä¸€å¼€å§‹æ²¡æ³¨æ„ï¼Œå°±å®‰è£…äº†ï¼Œå¦‚æœå¯ä»¥çš„è¯ ä¸å®‰è£…è¿™ä¸ªè¯•è¯•ï¼Œå®ƒæ˜¯ç”¨æ¥ç¼–è¯‘cæ–‡ä»¶çš„ï¼Œä½†æ˜¯æˆ‘çŒœæµ‹è¿è¡Œçš„æ—¶å€™ç”¨ä¸ä¸Šå§ï¼Œæˆ‘ä¹Ÿä¸ç¡®å®šï¼Œä¸æƒ³çœç‚¹ç©ºé—´ å°±å‹¾é€‰ä¸Šå§ VSä¹Ÿè£…ä¸Šå¯ä»¥ä½¿ç”¨2019ç‰ˆæœ¬ï¼Œè¿™é‡Œç™¾åº¦ä¸€ä¸‹ã€‚<br />åé¢å°±ç›´æ¥ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥å°±å®Œäº‹ã€‚**ä¸Šé¢çš„é‚£ä¸ªåšå®¢è¿˜æ–°å»ºäº†å¾ˆå¤šç¯å¢ƒå˜é‡ï¼Œæˆ‘è¿™é‡Œå¹¶æ²¡æœ‰æ–°å»ºç¯å¢ƒå˜é‡ï¼Œå®ƒè‡ªå·±ä¼šæ·»åŠ ä¸¤ä¸ªå°±è¶³å¤Ÿäº†ã€‚**
<a name="nyfqS"></a>
## å®‰è£…CUDNN
è¿™é‡Œçœ‹ä¸Šé¢çš„åšå®¢æ–‡ç« å°±è¡Œï¼Œé‡ç‚¹æ˜¯
> æŠŠcuDNNå‹ç¼©åŒ…è§£å‹ç¼©ï¼Œåˆ†åˆ«æŠŠbinã€includeã€lib\x64ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­çš„.dllã€.hå’Œ.libæ–‡ä»¶å¤åˆ¶åˆ°CUDAç›®å½•ä¸‹å¯¹åº”æ–‡ä»¶å¤¹é‡Œã€‚
> ä¸æ˜¯æŠŠä¸‰ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶è¿‡å»è¦†ç›–æ‰ï¼Œæ˜¯é‡Œé¢çš„æ–‡ä»¶ï¼ï¼ï¼
> ä¸æ˜¯æŠŠä¸‰ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶è¿‡å»è¦†ç›–æ‰ï¼Œæ˜¯é‡Œé¢çš„æ–‡ä»¶ï¼ï¼ï¼
> ä¸æ˜¯æŠŠä¸‰ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶è¿‡å»è¦†ç›–æ‰ï¼Œæ˜¯é‡Œé¢çš„æ–‡ä»¶ï¼ï¼ï¼


åœ¨è¿™ä¸ªè·¯å¾„æ‰§è¡Œå‘½ä»¤å‡ºç°è¿™ä¸ªå°±æˆåŠŸäº†<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681639049182-fff6a968-6534-4d68-9153-988098207b7d.png#averageHue=%23afafae&clientId=uc7484e32-b90b-4&from=paste&height=517&id=u87108a8c&name=image.png&originHeight=646&originWidth=1007&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=86021&status=done&style=stroke&taskId=uc002b142-e975-43cb-b2fb-fe128bdf4de&title=&width=805.6)

<a name="LcQvZ"></a>
# ç¬¬äºŒå¼ï¼šå®‰è£…PyTorch
è¿™ä¹Ÿæ˜¯ä¸€å‘ç‚¹ï¼Œæˆ‘çš„è¸©å‘ä¹‹è·¯å°±æ¥è‡ªäºå®ƒï¼Œé¦–å…ˆçœ‹æ®µä»£ç <br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681639308800-123d652e-c300-4a5d-8f84-e9013ab08704.png#averageHue=%23fdfaf9&clientId=uc7484e32-b90b-4&from=paste&height=438&id=u6063a224&name=image.png&originHeight=548&originWidth=824&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=56676&status=done&style=stroke&taskId=u45114cd2-8cd7-47bd-9f59-1ac9cb37eac&title=&width=659.2)<br />è¿™ä¸ªå®˜æ–¹åŠ è½½æ¨¡å‹çš„ä»£ç ï¼Œé‡Œé¢çš„skip_initæ–¹æ³•æ˜¯1.10.1ç‰ˆæœ¬æ‰æœ‰çš„ï¼Œ**æˆ‘ä¸€å¼€å§‹ç”¨çš„CUDA11 ï¼Œtrochç‰ˆæœ¬åªæœ‰1.7.1æ”¯æŒCUDA11ï¼Œæ˜¯æ²¡æœ‰è¿™ä¸ªæ–¹æ³•çš„ï¼Œæƒ³ä¸é€šä¸ºä»€ä¹ˆç‰ˆæœ¬é«˜ åè€Œæ”¯æŒçš„å°‘ï¼ï¼ğŸ¤¬ **<br />![Suggestion.gif](https://cdn.nlark.com/yuque/0/2023/gif/1638822/1681639477818-28e3f31d-f1b5-41e6-b79a-2a8f688b4285.gif#averageHue=%23cbc8c8&clientId=uc7484e32-b90b-4&from=drop&id=u15e79157&name=Suggestion.gif&originHeight=100&originWidth=100&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=15915&status=done&style=stroke&taskId=u373d1a7c-d41c-4505-9a90-23daec45348&title=)<br />è¿™ä¹Ÿæ˜¯ä¸Šé¢ä¸ºä»€ä¹ˆä¸€å®šè¦å®‰è£…torchç‰ˆæœ¬å¤§äº1.10.1ä»¥ä¸Šç‰ˆæœ¬çš„åŸå› ï¼Œå¦åˆ™ä¼šæŠ¥è¿™ä¸ªæ–¹æ³•æ‰¾ä¸åˆ°ã€‚<br />ç„¶åæˆ‘å»é—®äº†å®˜æ–¹ï¼Œå®ƒè®©æˆ‘æ”¹ä¸‹ä»£ç <br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681639550285-9fb43ed5-073b-4c21-8d89-c978cd454c99.png#averageHue=%23f0f3c9&clientId=uc7484e32-b90b-4&from=paste&height=218&id=u48dffa38&name=image.png&originHeight=273&originWidth=592&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=21273&status=done&style=stroke&taskId=uf42c55ab-e17a-449b-82ba-1bfd05040f9&title=&width=473.6)<br />ä½†æ˜¯å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œè¿™ä¸ªä¸æŠ¥é”™äº†ï¼Œåˆä¼šæœ‰å…¶ä»–é—®é¢˜<br />æ‰€ä»¥è¿˜æ˜¯çœ‹[å®˜ç½‘](https://pytorch.org/get-started/locally/)<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681637012656-666ccfa6-a223-41eb-b19f-fc9e58fe982f.png#averageHue=%23ea6847&clientId=uc7484e32-b90b-4&from=paste&height=413&id=uc57b792b&name=image.png&originHeight=778&originWidth=1217&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=112298&status=done&style=stroke&taskId=u5a80c3f5-1e53-480d-8449-3220669ff32&title=&width=645.4000244140625)<br />å¦‚æœä½ éª¨éª¼ä¼˜ç§€æ˜¯CUDA11.7 11.8,é‚£ä¹ˆå¤åˆ¶ä¸‹é¢çš„åœ°å€å®‰è£…å°±å®Œäº†ï¼Œå¦‚æœä½ çš„ç‰ˆæœ¬ä¸æ˜¯å°±ç‚¹å‡»ï¼Œpreviours versions é‡Œ è¿›åˆ°ä¸€ä¸ªé¡µé¢<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681637199602-0e1ba15f-f35f-4350-bed6-cb3951c8855c.png#averageHue=%23ece1b8&clientId=uc7484e32-b90b-4&from=paste&height=654&id=u189fcb02&name=image.png&originHeight=818&originWidth=1464&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=75123&status=done&style=stroke&taskId=u4965afbd-c601-40eb-a813-fbc873f0167&title=&width=1171.2)<br />å› ä¸ºå®ƒå¾ˆå¤šï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©ç›¸ä¿¡è¿™ä¸ªç‰ˆæœ¬ï¼Œå…¶å®æ˜¯å› ä¸ºæ²¡å¾—é€‰ï¼Œè¿™æ˜¯æˆ‘ç”µè„‘ç›®å‰æœ€åˆé€‚çš„ä¸€ä¸ªç‰ˆæœ¬äº†ï¼Œæˆ‘ä¹‹å‰æŒ‰ç…§æˆ‘ç”µè„‘æœ€é«˜ç‰ˆæœ¬çš„CUDA11.0 å»å®‰è£…ï¼Œå‘ç°åªæœ‰2ä¸ªç‰ˆæœ¬é€‰æ‹©<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681637319233-2001bb0d-b1e1-4d67-a882-a57c07179bb3.png#averageHue=%23db9e5a&clientId=uc7484e32-b90b-4&from=paste&height=489&id=u96e452d2&name=image.png&originHeight=611&originWidth=1286&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=52911&status=done&style=stroke&taskId=u16c4d666-092a-4cad-ab3a-13bf52c96d2&title=&width=1028.8)<br />è¿™é‡Œåƒä¸‡ä¸è¦ç”¨ä»€ä¹ˆæ¸…åçš„é•œåƒæºå»å®‰è£…ï¼Œä¸è¦ç”¨ä»€ä¹ˆæ¸…åçš„é•œåƒæºå»å®‰è£…ï¼Œä¸è¦ç”¨ä»€ä¹ˆæ¸…åçš„é•œåƒæºå»å®‰è£…<br />æ„Ÿè§‰é‚£ä¸œè¥¿ä¸‹è½½ä¸‹æ¥æœ‰é—®é¢˜ï¼Œ<br />ä½†æ˜¯å®˜ç½‘æºçš„ä¸‹è½½å¾ˆæ…¢ï¼Œè¿™é‡Œæ¨èä½¿ç”¨ç¦»çº¿å®‰è£…<br />è¿›åˆ°è¿™ä¸ªåœ°å€ [é“¾æ¥](https://download.pytorch.org/whl/cu102/torch_stable.html) cu102çš„ï¼Œåœ°å€ä¸Šçš„cu102 å¯ä»¥æ¢æˆå…¶ä»–å¯¹åº”çš„cudaç‰ˆæœ¬ã€‚ç„¶åçœ‹å“ªä¸ªtorchæ”¯æŒï¼Œåé¢cp å¯¹åº”çš„æ˜¯pythonç‰ˆæœ¬<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681640238815-3e5d30a7-2fcd-43ff-9ff5-062f12e2adc8.png#averageHue=%23fefefb&clientId=uc7484e32-b90b-4&from=paste&height=612&id=ue078497a&name=image.png&originHeight=765&originWidth=1516&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=126444&status=done&style=stroke&taskId=uef21f10f-6c4e-4cd1-9f20-019620f3b42&title=&width=1212.8)

ä¸‹è½½ä¸‹æ¥ï¼Œç„¶å torchaudioã€torchvision ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œéƒ½åœ¨è¿™ä¸ªç½‘ç«™å¯ä»¥æ‰¾åˆ°ã€‚<br />è¿™é‡Œè´´ä¸‹æˆ‘è¿™ä¸‰ä¸ªåŒ…å¯¹åº”çš„ç‰ˆæœ¬<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681641374140-4d65cdbb-7f79-400c-88c1-02b08a88f493.png#averageHue=%23f6f3f0&clientId=uc7484e32-b90b-4&from=paste&height=76&id=ud66ae1c4&name=image.png&originHeight=95&originWidth=480&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=9253&status=done&style=stroke&taskId=u494a71b6-63fe-4751-9b0c-2f2bc536ae1&title=&width=384)<br />æˆ‘çŒœæ¸…åæºä¸‹è½½çš„æ˜¯ä¸å¸¦å¯¹åº”cudaç‰ˆæœ¬çš„ï¼Œä¸€ä¸ªtorch1.10.2çš„ç‰ˆæœ¬ å¯ä»¥æ˜¯cuda 102  103 105ç­‰ç­‰ã€‚ã€‚ã€‚æˆ‘è£…è¿‡æ¸…åæºä¸‹è½½çš„æ˜¯ä¸è¡Œçš„ï¼Œå¯èƒ½æˆ‘è„¸é»‘<br />ç„¶åè¿›å…¥åˆ°æ–‡ä»¶ä¸‹è½½ç›®å½• ä½¿ç”¨ 
```
pip install torch-1.10.2+cu102-cp39-cp39-win_amd64.whl
```
å°±ä¼šè‡ªåŠ¨ç¼–è¯‘å¥½ã€‚<br />è¿™é‡Œæœ€é‡è¦çš„å°±æ˜¯ cuda ç‰ˆæœ¬å’Œtorchç‰ˆæœ¬ä¸€å®šè¦å¯¹åº”å¥½ï¼Œå¦åˆ™torchæ˜¯ç”¨ä¸äº†GPUæ¨¡å¼æ¥è·‘æ¨¡å‹çš„

python æ‰§è¡Œ
```
import torch
print(torch.cuda.is_available(),'GPUéƒ¨ç½²')
```
å¦‚æœæ˜¯trueé‚£ä¹ˆå°±å®‰è£…æˆåŠŸäº†ï¼<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681696903607-3fd8d307-9d65-4bf2-a01e-d1a5369c2919.png#averageHue=%23f0f7f5&clientId=u4159a63c-3e91-4&from=paste&height=217&id=u167be449&name=image.png&originHeight=423&originWidth=400&originalType=binary&ratio=1&rotation=0&showTitle=false&size=106519&status=done&style=stroke&taskId=u9de120ec-0eaf-44d1-a977-6657e020a33&title=&width=205)
<a name="Lkv3O"></a>
# ç¬¬ä¸‰æ–§ï¼šä¸‹è½½int4æ¨¡å‹
å®˜æ–¹è¯´æ²¡æœ‰é‡åŒ–çš„ç‰ˆæœ¬éœ€è¦13Gå†…å­˜ï¼Œå§æ§½ï¼Œè¿™å¯¹äºå®¶ç”¨ç¬”è®°æœ¬ä¹Ÿæ˜¯ä¸€ä¸ªå¤§å¤§å¤§å†…å­˜äº†<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681642081606-184a76cb-899f-4cb1-a8d0-0688209a6d55.png#averageHue=%23e7cb91&clientId=uc7484e32-b90b-4&from=paste&height=155&id=udb597231&name=image.png&originHeight=194&originWidth=1094&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=22541&status=done&style=stroke&taskId=uf2d98558-66a1-426b-b103-fa09e5a4ef3&title=&width=875.2)<br />æ‰€ä»¥æˆ‘ä»¬ç›´æ¥ä¸‹è½½ï¼Œé‡åŒ–å¥½çš„ç‰ˆæœ¬ï¼Œåœ¨è¿™ä¸ªåœ°å€[int4](https://huggingface.co/THUDM/chatglm-6b-int4),è¿™é‡Œè¿˜éœ€è¦ä¸‹è½½ git fls ,ç„¶åç”¨æ¢¯å­ä¸‹è½½ä¼šå¿«ç‚¹ã€‚ä¸‹è½½åˆ°6bçš„ä»“åº“ç›®å½•å“¦<br />å®Œæ•´ç›®å½•ï¼š<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681642198334-46e0bef0-192f-4bc5-a837-12854b266226.png#averageHue=%23faf8f5&clientId=uc7484e32-b90b-4&from=paste&height=446&id=u035a11c6&name=image.png&originHeight=558&originWidth=404&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=39531&status=done&style=stroke&taskId=u9ade09c0-e002-4ae7-8e7a-debe027b783&title=&width=323.2)

web_demoè¿™ä¸ªæ–‡ä»¶ åŠ è½½æ¨¡å‹çš„è·¯å¾„è®°å¾—æ”¹ä¸€ä¸‹<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681697046388-bdb42bc2-bb11-4e30-a874-dfd3b309be53.png#averageHue=%23302012&clientId=u4159a63c-3e91-4&from=paste&height=152&id=u046551c3&name=image.png&originHeight=152&originWidth=1057&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24586&status=done&style=stroke&taskId=ue7abfad2-0dd6-45ad-a6da-fd678958e84&title=&width=1057)
<a name="G8igr"></a>
# ç¬¬å››åˆ€ï¼šå®‰è£…GCC
ä¸Šé¢å®‰è£…å®Œæˆä¹‹åå¯ä»¥æ‰§è¡Œ python webdemo.py è·‘ä¸€ä¸‹ï¼Œå¦‚æœæŠ¥é”™ä¸”æç¤º<br />![c166dc08acd03ba5b816591b5c604c9.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681641826347-6a9039aa-2c0c-4701-a96d-4a6540f787cd.png#averageHue=%231a1a1a&clientId=uc7484e32-b90b-4&from=paste&height=144&id=u42a221fa&name=c166dc08acd03ba5b816591b5c604c9.png&originHeight=180&originWidth=771&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=15031&status=done&style=stroke&taskId=u094379c6-4c66-4f1f-ba48-725e66e6d89&title=&width=616.8)<br />é‚£ä¹ˆå»è¿™ä¸ª[GCC](https://jmeubank.github.io/tdm-gcc/) å®‰è£… 10.3.0çš„ç‰ˆæœ¬ å°±è¡Œï¼Œè¾“å…¥ gcc-v å‡ºç°è¿™ä¸ªå°±æˆåŠŸå•¦<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681697088568-0249272a-0f3d-40a9-a913-23dfa75ea3a4.png#averageHue=%231d1d1d&clientId=u4159a63c-3e91-4&from=paste&height=265&id=u6246a2e5&name=image.png&originHeight=265&originWidth=808&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13711&status=done&style=stroke&taskId=uf0d83ca0-9c0d-4d69-9819-e222e5f66fe&title=&width=808)

æœ€åçš„æœ€åï¼Œå¦‚æœcuad ã€ torch ç‰ˆæœ¬å¯¹åº”æ­£ç¡®ï¼Œé‚£ä¹ˆè¿è¡Œpython web_demo.pyå°±æˆåŠŸå•¦<br />![image.png](https://cdn.nlark.com/yuque/0/2023/png/1638822/1681642994746-158efac3-8a05-40d5-958c-46e873abbea6.png#averageHue=%23fdf9f5&clientId=uc7484e32-b90b-4&from=paste&height=602&id=u550de29d&name=image.png&originHeight=753&originWidth=1666&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=76950&status=done&style=stroke&taskId=u6a63feb1-fa5c-46f5-9d3c-435308783a0&title=&width=1332.8)
<a name="QTXWd"></a>
# æ€»ç»“

- **ä¸‹è½½çš„cudaç‰ˆæœ¬å’Œtorchç‰ˆæœ¬ä¸€å®šè¦å¯¹åº”ï¼Œ**
- **å¤šå»å®˜ç½‘æŸ¥çœ‹ä¸¤è€…å¯¹åº”çš„ç‰ˆæœ¬ï¼Œï¼ˆå¦‚æœä½ çš„ç”µè„‘å’Œæˆ‘ä¸€æ ·è½åï¼‰**
- è¿™ä¸ªç‰ˆæœ¬çš„cudaè¿˜æ˜¯è€äº†ï¼Œ**æœ‰ æ¡ä»¶çš„å‡çº§é©±åŠ¨ï¼Œæ²¡æ¡ä»¶çš„æ¢æ–°ç”µè„‘ï¼Œä¸‹è½½æ›´æ–°çš„cuadç‰ˆæœ¬çš„ torch**ï¼Œä½†æ˜¯å®‰è£…æ€è·¯æ˜¯ä¸€æ ·çš„ã€‚
- ä¸‹æ¬¡æä¸ªæœåŠ¡å™¨ï¼Œæ‰¾å¥½è®­ç»ƒé›†ï¼Œè®­ç»ƒä¸€ä¸ªä»€ä¹ˆå‡ºæ¥è¯•è¯•ï¼Ÿ
- å¸Œæœ›å¤§å®¶å®‰è£…æˆåŠŸï¼Œè¸å…¥è¯­è¨€æ¨¡å‹ä¿®ä»™é¢†åŸŸçš„ç¬¬ä¸€æ­¥

